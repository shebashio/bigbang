# yaml-language-server: $schema=https://raw.githubusercontent.com/helm-unittest/helm-unittest/refs/heads/main/schema/helm-testsuite.json
suite: "legacy privateâ€‘registry"

excludeTemplates:
  - "package-imagepull.yaml"
set:
  registryCredentials:
    registry: registry1.dso.mil
    username: foo
    password: bar
  istioGateway:
    enabled: true
  istiod:
    enabled: true
tests:
  - it: does not render any private-registry secrets outside of the package-imagepull
    documentSelector:
      path: metadata.name
      value: private-registry
      matchMany: true
      skipEmptyTemplates: true
    asserts:
      - hasDocuments:
          count: 0

