{{- if .Values.addons.istioOscalController.enabled }}
{{- include "values-secret" (dict "root" $ "package" .Values.addons.istioOscalController "name" "istio-oscal-controller" "defaults" (include "bigbang.defaults.istioOscalController" .)) }}
{{- end }}

{{- define "bigbang.defaults.istioOscalController" -}}
domain: {{ .Values.domain }}

image:
  pullPolicy: {{ .Values.imagePullPolicy }}

monitoring:
  enabled: {{ .Values.monitoring.enabled }}

istio:
  enabled: {{ .Values.istio.enabled }}
  oscalController:
    gateways:
    - istio-system/{{ default "public" .Values.addons.istioOscalController.ingress.gateway }}

{{- end }}
{{- end -}}
