{{- if or (and .Values.addons.headlamp.enabled .Values.addons.headlamp.config.oidc.clientId) (dig "headlamp" "clientId" false .Values.addons.headlamp.config.oidc) }}
apiVersion: v1
kind: Secret
metadata:
  name: headlamp-sso
  namespace: headlamp
type: kubernetes.io/opaque
stringData:
  {{- if (dig "headlamp" "clientId" false .Values.addons.headlamp.config.oidc) }}
  client_id: {{ (dig "headlamp" "clientId" false .Values.addons.headlamp.config.oidc) }}
  {{- else if .Values.addons.headlamp.config.oidc.clientId }}
  client_id: {{ .Values.addons.headlamp.config.oidc.clientId }}
  {{- end }}
  {{- if (dig "headlamp" "clientSecret" false .Values.addons.headlamp.config.oidc) }}
  client_secret: {{ (dig "headlamp" "clientSecret" false .Values.addons.headlamp.config.oidc) }}
  {{- else if .Values.addons.headlamp.config.oidc.clientSecret }}
  client_secret: {{ .Values.addons.headlamp.config.oidc.clientSecret }}
  {{- end }}
{{- end }}
